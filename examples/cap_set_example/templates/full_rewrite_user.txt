# TASK SPECIFICATION

Produce a **complete, runnable Python module** that constructs a large **cap set** in ð”½â‚ƒâ¿.

Important: reproducibility is required. The module must use a module-level `_RANDOM_SEED` and seed all internal randomness from it.

---

## 1. Goal

Maximize |A| for a cap set A âŠ† ð”½â‚ƒâ¿ (no nontrivial x+y+z â‰¡ 0), returning a list of n-length tuples.

In this task, the evaluator will call **`generate_set(7)` exactly once** (i.e. n = 7).

---

## 2. Core Constraint

The construction must be a **single greedy process**, where the global ordering of candidates is computed once (priorities are intrinsic-only) and then iterated deterministically.

Hint: You can exploit **symmetry** to construct relationships between coordinates to obtain better feature representations.

For example, you can **group coordinates** to reduce the solution space (i.e. consider the relationships among vec[i], vec[-i], vec[i - k], vec[i + k], and vec[(i + k) % n]).

---

## 3. Creativity

Feel free to be **bold** and **creative** when designing the **priority function**. Do not hesitate to explore aggressive heuristics or randomized components.

You are encouraged to **outperform** the current implementation rather than being constrained by the references. That is to say, you can adopt **completely different** methods that may lead to breakthroughs.

Performance gains take precedence over interpretability in the scoring design.

---

## 4. Optuna / Param Tuning

You should use **Optuna** to tune numeric hyperparameters for the priority function.

For certain key hyperparameters that are difficult to accurately give specific values, Optuna can be used to make more thorough attempts.

You must control the number of parameters (not exceeding 7), as too many parameters may result in ineffective parameter tuning within the limited time.

Determinism (REASSERTED):

- Define a module-level `_RANDOM_SEED` and use it to seed the Python `random` module, NumPy (if used), and Optuna `TPESampler` (if used).
- Identical source + identical `_RANDOM_SEED` must produce identical output.

---

## 5. Output Format

Your module must define:

```python
def generate_set(n: int) -> List[Tuple[int, ...]]:
````

You may optionally structure code as:

```python
class CapSetBuilder:
    def __init__(self, params, seed):
        ...
    def build(self) -> List[Tuple[int, ...]]:
        ...
```

Return only the full Python module source as your reply.

```python
<full module code>
```

---

## 6. CURRENT PROGRAM CONTEXT

Parent program code (base to improve):

```python
{current_program}
```

Metrics / fitness:
- {metrics}
- fitness_score: {fitness_score}
- feature_coords: {feature_coords}

Top/diverse attempts from this island:
{evolution_history}

Artifacts:
{artifacts}